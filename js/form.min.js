const formLink=document.querySelector(".write"),formPopup=document.querySelector(".modal-write"),formClose=formPopup.querySelector(".modal-close"),writeForm=formPopup.querySelector(".write-form"),formLogin=formPopup.querySelector(".email-write"),formName=formPopup.querySelector(".name-write");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(a){isStorageSupport=!1}formLink.addEventListener("click",function(a){a.preventDefault(),formPopup.classList.add("modal-bounce"),formPopup.addEventListener("animationend",a=>{a.target.classList.add("modal-show"),formPopup.classList.remove("modal-bounce")},{once:!0}),storage?(formLogin.value=storage,formName.focus()):formLogin.focus()}),formClose.addEventListener("click",function(a){a.preventDefault(),formPopup.classList.remove("modal-show"),formPopup.classList.remove("modal-error"),formPopup.classList.remove("modal-bounce")}),writeForm.addEventListener("submit",function(a){formLogin.value&&formName.value?isStorageSupport&&localStorage.setItem("login",formLogin.value):(a.preventDefault(),formPopup.classList.add("modal-error"),formPopup.addEventListener("animationend",a=>{a.target.classList.remove("modal-error")},{once:!0}))}),window.addEventListener("keydown",function(a){27===a.keyCode&&formPopup.classList.contains("modal-show")&&(a.preventDefault(),formPopup.classList.remove("modal-show"),formPopup.classList.remove("modal-error"),formPopup.classList.remove("modal-bounce"))});